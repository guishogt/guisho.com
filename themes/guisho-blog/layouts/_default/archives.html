{{ define "main" }}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
  <div class="flex flex-col lg:flex-row gap-12">
    <!-- Main Content -->
    <div class="lg:w-2/3">
      <!-- Page Title -->
      <div class="mb-10">
        <h1 class="text-5xl md:text-6xl font-bold text-dark-text font-display mb-4 flex items-center gap-4">
          <span class="text-primary text-5xl">ðŸ“…</span>
          Archives
        </h1>
        <p class="text-xl text-dark-text/70 font-sans">Browse all posts by date</p>
      </div>

      {{ $pages := where .Site.RegularPages "Type" "posts" }}
      {{ $grouped := $pages.GroupByDate "January 2006" }}

      <div class="space-y-8">
        {{ range $grouped }}
        <div id="{{ .Key | urlize }}" class="bg-white/40 p-8 rounded-2xl doodle-border">
          <h2 class="text-3xl font-bold font-display text-dark-text mb-6 flex items-center gap-3 sticky top-0 bg-white/40 py-2 -mt-2">
            <span class="text-primary">ðŸ“†</span>
            {{ .Key }}
            <span class="text-lg font-sans text-dark-text/50">({{ len .Pages }} posts)</span>
          </h2>
          <div class="space-y-4">
            {{ range .Pages }}
            <a href="{{ .Permalink }}" class="group flex items-start gap-4 p-4 bg-white/50 rounded-xl hover:bg-white/80 transition-all border-2 border-transparent hover:border-primary/30">
              {{ with .Params.cover.image }}
              <div class="w-20 h-20 flex-shrink-0 rounded-lg overflow-hidden">
                <img src="{{ . }}" alt="{{ $.Title }}" class="w-full h-full object-cover">
              </div>
              {{ else }}
              <div class="w-20 h-20 flex-shrink-0 rounded-lg bg-primary/10 flex items-center justify-center">
                <span class="text-primary text-3xl">ðŸ“„</span>
              </div>
              {{ end }}
              <div class="flex-1 min-w-0">
                <h3 class="font-display font-bold text-xl text-dark-text group-hover:text-primary transition-colors line-clamp-2">{{ .Title }}</h3>
                <p class="text-dark-text/50 text-sm mt-1">{{ .Date.Format "January 2, 2006" }}</p>
                {{ with .Params.categories }}
                <div class="flex flex-wrap gap-1 mt-2">
                  {{ range first 2 . }}
                  <span class="px-2 py-0.5 bg-secondary/20 text-dark-text text-xs font-bold rounded-full">{{ . }}</span>
                  {{ end }}
                </div>
                {{ end }}
              </div>
              <span class="text-secondary group-hover:text-primary group-hover:translate-x-1 transition-all" aria-hidden="true">â†’</span>
            </a>
            {{ end }}
          </div>
        </div>
        {{ end }}
      </div>
    </div>

    <!-- Sidebar -->
    {{ partial "sidebar.html" . }}
  </div>
</div>
{{ end }}
